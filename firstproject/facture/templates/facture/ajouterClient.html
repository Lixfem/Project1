{% extends 'facture/base.html' %}

{% block content %}

    <div class="container mt-4">
        <h1 class="text-center mb-4 bg-light p-3 rounded">
            <i class="fas fa-user-plus me-2"></i>
            Enregistrer un nouveau client
        </h1>

        <!-- Affichage des messages (succès ou erreur) -->
        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <p class="{% if message.tags == 'success' %}success-message{% else %}error-message{% endif %}">
                        {{ message }}
                    </p>
                {% endfor %}
            </div>
        {% endif %}

        <!-- Affichage des erreurs du formulaire -->
        {% if form.errors %}
            <div class="error-message">
                <p>Veuillez corriger les erreurs suivantes :</p>
                <ul>
                    {% for field in form %}
                        {% for error in field.errors %}
                            <li>{{ field.label }} : {{ error }}</li>
                        {% endfor %}
                    {% endfor %}
                    {% for error in form.non_field_errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}

        <!-- Formulaire -->
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="{{ form.nomClient.id_for_label }}" class="form-label">Nom et prénom du client :</label>
                {{ form.nomClient }}
            </div>
            <div class="form-group">
                <label for="{{ form.emailClient.id_for_label }}" class="form-label">Email du client :</label>
                {{ form.emailClient }}
                {% if form.emailClient.errors %}
                    <div class="error-message">
                        {{ form.emailClient.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="{{ form.telephoneClient.id_for_label }}" class="form-label">Numéro de téléphone du client :</label>
                {{ form.telephoneClient }}
            </div>
            <div class="form-group">
                <label for="{{ form.sexClient.id_for_label }}" class="form-label">Sexe :</label>
                {{ form.sexClient }}
            </div>
            <div class="form-group">
                <label for="{{ form.ageClient.id_for_label }}" class="form-label">Tranche d'âge :</label>
                {{ form.ageClient }}
            </div>
            <div class="form-group">
                <label for="{{ form.adresseClient.id_for_label }}" class="form-label">Adresse du client :</label>
                {{ form.adresseClient }}
            </div>
            <div class="form-group">
                <label for="{{ form.villeClient.id_for_label }}" class="form-label">Ville du client :</label>
                {{ form.villeClient }}
            </div>
            <div class="d-grid gap-2 d-md-flex justify-content-md-end y-6">
                <a href="{% url 'liste-clients' %}" class="btn btn-secondary me-md-2">
                    <i class="fas fa-save"></i>Retour
                </a>
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="fas fa-save"></i>Enregistrer le client
                </button>

            </div>
           
        </form>
    </div>

    <!-- Bootstrap JS (optionnel, pour les composants interactifs si nécessaires) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}