{% extends 'facture/base.html' %}

{% block content %}

    <div class="container mt-4">
        <h1 class="text-center mb-4 bg-light p-3 rounded">
            <i class="fas fa-user-plus me-2"></i>
            Enregistrer un nouveau client
        </h1>

        <!-- Affichage des messages (succès ou erreur) -->
        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <p class="{% if message.tags == 'success' %}success-message{% else %}error-message{% endif %}">
                        {{ message }}
                    </p>
                {% endfor %}
            </div>
        {% endif %}

        <!-- Affichage des erreurs du formulaire -->
        {% if form.errors %}
            <div class="error-message">
                <p>Veuillez corriger les erreurs suivantes :</p>
                <ul>
                    {% for field in form %}
                        {% for error in field.errors %}
                            <li>{{ field.label }} : {{ error }}</li>
                        {% endfor %}
                    {% endfor %}
                    {% for error in form.non_field_errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}

        <!-- Formulaire -->
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="{{ form.client_type.id_for_label }}" class="form-label">Type de client :</label>
                {{ form.client_type }}
                {% if form.client_type.errors %}
                    <div class="error-message">
                        {{ form.client_type.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="{{ form.nom.id_for_label }}" class="form-label">Nom et prénom du client :</label>
                {{ form.nom }}
                {% if form.nom.errors %}
                    <div class="error-message">
                        {{ form.nom.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="{{ form.email.id_for_label }}" class="form-label">Email du client :</label>
                {{ form.email }}
                {% if form.email.errors %}
                    <div class="error-message">
                        {{ form.email.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="{{ form.telephone.id_for_label }}" class="form-label">Numéro de téléphone du client :</label>
                {{ form.telephone }}
                {% if form.telephone.errors %}
                    <div class="error-message">
                        {{ form.telephone.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="{{ form.sexe.id_for_label }}" class="form-label">Sexe :</label>
                {{ form.sexe }}
                {% if form.sexe.errors %}
                    <div class="error-message">
                        {{ form.sexe.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="{{ form.adresse.id_for_label }}" class="form-label">Adresse du client :</label>
                {{ form.adresse }}
                {% if form.adresse.errors %}
                    <div class="error-message">
                        {{ form.adresse.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="{{ form.ville.id_for_label }}" class="form-label">Ville du client :</label>
                {{ form.ville }}
                {% if form.ville.errors %}
                    <div class="error-message">
                        {{ form.ville.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="{{ form.company_id_number.id_for_label }}" class="form-label">Numéro d'identification de l'entreprise :</label>
                {{ form.company_id_number }}
                {% if form.company_id_number.errors %}
                    <div class="error-message">
                        {{ form.company_id_number.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="{{ form.company_iban.id_for_label }}" class="form-label">IBAN de l'entreprise :</label>
                {{ form.company_iban }}
                {% if form.company_iban.errors %}
                    <div class="error-message">
                        {{ form.company_iban.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="{{ form.company_bic.id_for_label }}" class="form-label">BIC de l'entreprise :</label>
                {{ form.company_bic }}
                {% if form.company_bic.errors %}
                    <div class="error-message">
                        {{ form.company_bic.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                <a href="{% url 'liste-clients' %}" class="btn btn-secondary me-md-2">
                    <i class="fas fa-arrow-left"></i> Retour
                </a>
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="fas fa-save"></i> Enregistrer le client
                </button>
            </div>
        </form>
    </div>

    <!-- Bootstrap JS (optionnel, pour les composants interactifs si nécessaires) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}